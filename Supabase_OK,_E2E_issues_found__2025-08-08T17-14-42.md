[ ] NAME:Stabilize E2E realtime and fix dashboard gaps DESCRIPTION:Overall initiative to make bidirectional realtime communication fully green and close dashboard functionality/test gaps.
-[x] NAME:Verify Supabase connectivity and schema via management API DESCRIPTION:Use supabase tool to list projects, fetch auth configuration, and run a read-only SQL to list public tables and sample data to confirm access.
-[x] NAME:Start development server and verify health endpoints DESCRIPTION:Run npm run dev (port 3001), watch logs for errors, and verify http://localhost:3001 and key health endpoints respond OK.
-[x] NAME:Run comprehensive Playwright E2E tests DESCRIPTION:Execute Playwright tests with webServer reuse, cover all suites, focusing also on bidirectional communication and realtime health.
-[ ] NAME:Summarize results and document any issues DESCRIPTION:Aggregate logs and test outputs, list issues with severity and suggested fixes; provide a concise summary of coverage and status.
-[x] NAME:P1: Fix Next.js dev overlay interference in Playwright tests DESCRIPTION:Implement overlay suppression and robust clicks: add a setup test (auth.setup.ts) to hide overlay globally and create auth storageState; update key failing specs to use force clicks and overlay CSS injection.
-[x] NAME:P1: Resolve missing HandoverOrchestrator module DESCRIPTION:Create lib/ai/HandoverOrchestrator.ts that wraps aiHandoverService and exports handoverOrchestrator with request() using evaluateHandover.
-[x] NAME:P1: Update E2E test expectations and session persistence DESCRIPTION:Align expectations for unauthenticated routes (401) where appropriate; ensure session persistence across all projects using storageState produced by setup.
-[x] NAME:Phase 1: UI/UX Consistency Audit DESCRIPTION:Audit all dashboard pages against /dashboard/inbox reference. Document deltas for spacing, typography, color tokens, components, interactive states, empty/loading states, responsiveness.
-[ ] NAME:Phase 2: Design System Implementation DESCRIPTION:Standardize on components/ui/* across all dashboard pages; replace unified-ui usages; unify tokens, spacing, and responsive patterns; fix overflow/clipping.
--[ ] NAME:Normalize components across pages (replace unified-ui with components/ui) DESCRIPTION:Replace Badge/Card/Progress/Dialog/Input/Label/Select/Button unified-ui usages with components/ui equivalents; ensure variants and tokens; add thin wrappers if needed.
--[ ] NAME:Responsive and overflow fixes DESCRIPTION:Verify and fix overflow/clipping at 320/375/768/1024/1440 widths; standardize container sizes, spacing, and truncation. Ensure no nowrap misuse.
--[ ] NAME:Standardize empty/loading and a11y patterns DESCRIPTION:Use components/ui/empty-state and loading; ensure aria-live, labeled inputs, dialog a11y. Apply across pages.
--[ ] NAME:Refactor remaining dashboard pages (team, analytics, integrations, notifications, help) DESCRIPTION:component normalization; remove gradient backgrounds and hard-coded colors; align to inbox standard.
--[ ] NAME:Create /dashboard/settings scaffold DESCRIPTION:same style as inbox
-[ ] NAME:Phase 3: API-Based E2E Testing DESCRIPTION:Run comprehensive dashboard E2E with API login + storageState; cover messaging, realtime, presence/typing, AI handover, AI personalities, AI terminal, navigation; cross-browser.
--[ ] NAME:Comprehensive E2E run (API login + storageState) DESCRIPTION:Run full E2E suite across Chromium/Firefox/WebKit. Ensure nav, messaging, realtime, presence/typing all pass. Add light visual snapshots if stable.
-[ ] NAME:Phase 4: Logic-UI Integration Completion DESCRIPTION:Identify and fix gaps where UI doesnâ€™t integrate with backend; wire event handlers and state; add missing error/loading; ensure a11y.
--[ ] NAME:Wire missing handlers and state to backend DESCRIPTION:Connect UI actions (invite resend/cancel, roles, availability) to APIs; add error handling and optimistic updates.
--[ ] NAME:Accessibility verification and fixes DESCRIPTION:Keyboard nav, focus management, aria roles; color contrast. Dialog focus trap. Labels for all form controls.
-[/] NAME:Stabilize E2E realtime and fix dashboard gaps DESCRIPTION:Overall initiative to make bidirectional realtime communication fully green and close dashboard functionality/test gaps.
-[x] NAME:Research and plan database fixes for bidirectional E2E DESCRIPTION:Inventory schema mismatches and camelCase/snake_case issues; verify realtime channels and RLS requirements; plan minimal, safe changes.
-[x] NAME:Implement schema and code fixes for last_message_at and realtime DESCRIPTION:Update API routes and services to use last_message_at; add idempotent migration to ensure columns/triggers/publication; fix dashboard queries to snake_case.
-[x] NAME:Direct database smoke test for realtime DESCRIPTION:Create a script to insert a message and broadcast/subscribe to verify message and typing events. Run locally to validate.
-[x] NAME:Run bidirectional E2E and iterate DESCRIPTION:Execute npm run test:e2e:bidirectional; address any failures quickly; ensure all hooks/tests are green.
-[x] NAME:Fix Dashboard API Authentication with @supabase/ssr DESCRIPTION:Migrate from @supabase/auth-helpers-nextjs to @supabase/ssr package and update all dashboard API routes to properly handle async cookies() in Next.js 15. This is the primary blocker preventing dashboard conversations API from working.
-[x] NAME:Add missing data-testid attributes to dashboard UI components DESCRIPTION:Add data-testid='conversation' and other test attributes to dashboard conversation components so E2E tests can find elements properly.
-[x] NAME:Configure WebSocket connections for E2E browser environment DESCRIPTION:Update Playwright config and test setup to handle WebSocket connections properly in browser environment, including CSP bypass and proper headers.
-[/] NAME:Validate bidirectional E2E tests end-to-end DESCRIPTION:Run full E2E test suite after fixes to ensure 100% pass rate and bidirectional communication works flawlessly.