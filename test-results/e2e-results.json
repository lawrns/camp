{
  "config": {
    "configFile": "/Users/lukatenbosch/Downloads/campfire-v2/playwright.config.ts",
    "rootDir": "/Users/lukatenbosch/Downloads/campfire-v2/tests/e2e",
    "forbidOnly": false,
    "fullyParallel": true,
    "globalSetup": null,
    "globalTeardown": null,
    "globalTimeout": 0,
    "grep": {},
    "grepInvert": null,
    "maxFailures": 0,
    "metadata": {
      "actualWorkers": 2
    },
    "preserveOutput": "always",
    "reporter": [
      [
        "html",
        null
      ],
      [
        "json",
        {
          "outputFile": "test-results/e2e-results.json"
        }
      ],
      [
        "junit",
        {
          "outputFile": "test-results/e2e-results.xml"
        }
      ]
    ],
    "reportSlowTests": {
      "max": 5,
      "threshold": 300000
    },
    "quiet": false,
    "projects": [
      {
        "outputDir": "/Users/lukatenbosch/Downloads/campfire-v2/test-results",
        "repeatEach": 1,
        "retries": 0,
        "metadata": {
          "actualWorkers": 2
        },
        "id": "chromium",
        "name": "chromium",
        "testDir": "/Users/lukatenbosch/Downloads/campfire-v2/tests/e2e",
        "testIgnore": [],
        "testMatch": [
          "**/*.@(spec|test).?(c|m)[jt]s?(x)"
        ],
        "timeout": 45000
      },
      {
        "outputDir": "/Users/lukatenbosch/Downloads/campfire-v2/test-results",
        "repeatEach": 1,
        "retries": 0,
        "metadata": {
          "actualWorkers": 2
        },
        "id": "firefox",
        "name": "firefox",
        "testDir": "/Users/lukatenbosch/Downloads/campfire-v2/tests/e2e",
        "testIgnore": [],
        "testMatch": [
          "**/*.@(spec|test).?(c|m)[jt]s?(x)"
        ],
        "timeout": 45000
      },
      {
        "outputDir": "/Users/lukatenbosch/Downloads/campfire-v2/test-results",
        "repeatEach": 1,
        "retries": 0,
        "metadata": {
          "actualWorkers": 2
        },
        "id": "webkit",
        "name": "webkit",
        "testDir": "/Users/lukatenbosch/Downloads/campfire-v2/tests/e2e",
        "testIgnore": [],
        "testMatch": [
          "**/*.@(spec|test).?(c|m)[jt]s?(x)"
        ],
        "timeout": 45000
      },
      {
        "outputDir": "/Users/lukatenbosch/Downloads/campfire-v2/test-results",
        "repeatEach": 1,
        "retries": 0,
        "metadata": {
          "actualWorkers": 2
        },
        "id": "Mobile Chrome",
        "name": "Mobile Chrome",
        "testDir": "/Users/lukatenbosch/Downloads/campfire-v2/tests/e2e",
        "testIgnore": [],
        "testMatch": [
          "**/*.@(spec|test).?(c|m)[jt]s?(x)"
        ],
        "timeout": 45000
      },
      {
        "outputDir": "/Users/lukatenbosch/Downloads/campfire-v2/test-results",
        "repeatEach": 1,
        "retries": 0,
        "metadata": {
          "actualWorkers": 2
        },
        "id": "Mobile Safari",
        "name": "Mobile Safari",
        "testDir": "/Users/lukatenbosch/Downloads/campfire-v2/tests/e2e",
        "testIgnore": [],
        "testMatch": [
          "**/*.@(spec|test).?(c|m)[jt]s?(x)"
        ],
        "timeout": 45000
      },
      {
        "outputDir": "/Users/lukatenbosch/Downloads/campfire-v2/test-results",
        "repeatEach": 1,
        "retries": 0,
        "metadata": {
          "actualWorkers": 2
        },
        "id": "Microsoft Edge",
        "name": "Microsoft Edge",
        "testDir": "/Users/lukatenbosch/Downloads/campfire-v2/tests/e2e",
        "testIgnore": [],
        "testMatch": [
          "**/*.@(spec|test).?(c|m)[jt]s?(x)"
        ],
        "timeout": 45000
      },
      {
        "outputDir": "/Users/lukatenbosch/Downloads/campfire-v2/test-results",
        "repeatEach": 1,
        "retries": 0,
        "metadata": {
          "actualWorkers": 2
        },
        "id": "Google Chrome",
        "name": "Google Chrome",
        "testDir": "/Users/lukatenbosch/Downloads/campfire-v2/tests/e2e",
        "testIgnore": [],
        "testMatch": [
          "**/*.@(spec|test).?(c|m)[jt]s?(x)"
        ],
        "timeout": 45000
      }
    ],
    "shard": null,
    "updateSnapshots": "missing",
    "updateSourceMethod": "patch",
    "version": "1.54.1",
    "workers": 7,
    "webServer": null
  },
  "suites": [
    {
      "title": "simple-homepage-widget-test.spec.ts",
      "file": "simple-homepage-widget-test.spec.ts",
      "column": 0,
      "line": 0,
      "specs": [
        {
          "title": "Simple homepage widget bidirectional test",
          "ok": true,
          "tags": [],
          "tests": [
            {
              "timeout": 45000,
              "annotations": [],
              "expectedStatus": "passed",
              "projectId": "chromium",
              "projectName": "chromium",
              "results": [
                {
                  "workerIndex": 0,
                  "parallelIndex": 0,
                  "status": "passed",
                  "duration": 28420,
                  "errors": [],
                  "stdout": [
                    {
                      "text": "üéØ SIMPLE HOMEPAGE WIDGET BIDIRECTIONAL TEST\n"
                    },
                    {
                      "text": "==============================================\n"
                    },
                    {
                      "text": "üè† Step 1: Testing homepage widget...\n"
                    },
                    {
                      "text": "üìã Widget button exists: YES\n"
                    },
                    {
                      "text": "‚úÖ Widget opened\n"
                    },
                    {
                      "text": "üí¨ Sending message from widget: SIMPLE TEST: Widget message 1754272603123\n"
                    },
                    {
                      "text": "‚úÖ Widget message sent\n"
                    },
                    {
                      "text": "üì• Step 2: Checking dashboard...\n"
                    },
                    {
                      "text": "‚úÖ Agent logged in\n"
                    },
                    {
                      "text": "üìã Dashboard conversations found: 38\n"
                    },
                    {
                      "text": "‚úÖ Widget message found in conversation 3\n"
                    },
                    {
                      "text": "üí¨ Step 3: Testing dashboard to widget...\n"
                    },
                    {
                      "text": "‚úÖ Dashboard reply sent: SIMPLE TEST: Dashboard reply 1754272621706\n"
                    },
                    {
                      "text": "üìã Dashboard reply in widget: NO\n"
                    },
                    {
                      "text": "\n"
                    },
                    {
                      "text": "üéØ SIMPLE TEST SUMMARY\n"
                    },
                    {
                      "text": "======================\n"
                    },
                    {
                      "text": "üìã Widget button found: YES\n"
                    },
                    {
                      "text": "üìã Dashboard conversations: 38\n"
                    },
                    {
                      "text": "üìã Widget ‚Üí Dashboard: WORKING\n"
                    },
                    {
                      "text": "üéâ SUCCESS: Basic bidirectional communication working!\n"
                    }
                  ],
                  "stderr": [],
                  "retry": 0,
                  "startTime": "2025-08-04T01:56:36.190Z",
                  "annotations": [],
                  "attachments": []
                }
              ],
              "status": "expected"
            }
          ],
          "id": "b0291ae167cdc62ddd41-4d205ac1e3423d7812fa",
          "file": "simple-homepage-widget-test.spec.ts",
          "line": 18,
          "column": 5
        },
        {
          "title": "Database conversation verification",
          "ok": true,
          "tags": [],
          "tests": [
            {
              "timeout": 45000,
              "annotations": [],
              "expectedStatus": "passed",
              "projectId": "chromium",
              "projectName": "chromium",
              "results": [
                {
                  "workerIndex": 1,
                  "parallelIndex": 1,
                  "status": "passed",
                  "duration": 1852,
                  "errors": [],
                  "stdout": [
                    {
                      "text": "üîç DATABASE CONVERSATION VERIFICATION\n"
                    },
                    {
                      "text": "====================================\n"
                    },
                    {
                      "text": "üìã Conversation Check Result: {\n  \"exists\": true,\n  \"messageCount\": 11,\n  \"data\": {\n    \"messages\": [\n      {\n        \"id\": \"c278026b-4d50-439c-bebe-6365b2c9e291\",\n        \"conversationId\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"content\": \"Test message - 1754263632915\",\n        \"senderType\": \"visitor\",\n        \"senderId\": \"\",\n        \"senderName\": \"Anonymous\",\n        \"senderEmail\": null,\n        \"createdAt\": \"2025-08-03T23:27:14.414882+00:00\",\n        \"updatedAt\": \"2025-08-03T23:27:14.414882+00:00\",\n        \"metadata\": {},\n        \"attachments\": [],\n        \"status\": \"sent\",\n        \"inReplyToId\": null,\n        \"isDeleted\": false,\n        \"conversation_id\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"sender_type\": \"visitor\",\n        \"created_at\": \"2025-08-03T23:27:14.414882+00:00\"\n      },\n      {\n        \"id\": \"bbfa973a-83ab-43a1-9b12-253af0f69866\",\n        \"conversationId\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"content\": \"MANUAL DATABASE TEST: Agent reply from direct DB insert\",\n        \"senderType\": \"agent\",\n        \"senderId\": \"\",\n        \"senderName\": \"Test Agent\",\n        \"senderEmail\": null,\n        \"createdAt\": \"2025-08-03T23:52:50.595712+00:00\",\n        \"updatedAt\": \"2025-08-03T23:52:50.595712+00:00\",\n        \"metadata\": {},\n        \"attachments\": [],\n        \"status\": \"sent\",\n        \"inReplyToId\": null,\n        \"isDeleted\": false,\n        \"conversation_id\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"sender_type\": \"agent\",\n        \"created_at\": \"2025-08-03T23:52:50.595712+00:00\"\n      },\n      {\n        \"id\": \"5afd6285-fcf1-4d21-8d9f-c1d09d5a7d28\",\n        \"conversationId\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"content\": \"COMPREHENSIVE TEST: Agent reply 1754266869176\",\n        \"senderType\": \"agent\",\n        \"senderId\": \"6f9916c7-3575-4a81-b58e-624ab066bebc\",\n        \"senderName\": \"jam@jam.com\",\n        \"senderEmail\": \"jam@jam.com\",\n        \"createdAt\": \"2025-08-04T00:21:10.446782+00:00\",\n        \"updatedAt\": \"2025-08-04T00:21:10.446782+00:00\",\n        \"metadata\": {\n          \"source\": \"dashboard\",\n          \"agent_id\": \"6f9916c7-3575-4a81-b58e-624ab066bebc\",\n          \"timestamp\": \"2025-08-04T00:21:10.324Z\"\n        },\n        \"attachments\": [],\n        \"status\": \"sent\",\n        \"inReplyToId\": null,\n        \"isDeleted\": false,\n        \"conversation_id\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"sender_type\": \"agent\",\n        \"created_at\": \"2025-08-04T00:21:10.446782+00:00\"\n      },\n      {\n        \"id\": \"577ec998-49e5-4058-8f8d-ab0f7eb003e7\",\n        \"conversationId\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"content\": \"ah ye\",\n        \"senderType\": \"agent\",\n        \"senderId\": \"\",\n        \"senderName\": \"Support Agent\",\n        \"senderEmail\": null,\n        \"createdAt\": \"2025-08-04T00:36:04.546304+00:00\",\n        \"updatedAt\": \"2025-08-04T00:36:04.546304+00:00\",\n        \"metadata\": {\n          \"source\": \"dashboard\",\n          \"timestamp\": \"2025-08-04T00:36:04.229Z\"\n        },\n        \"attachments\": [],\n        \"status\": \"sent\",\n        \"inReplyToId\": null,\n        \"isDeleted\": false,\n        \"conversation_id\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"sender_type\": \"agent\",\n        \"created_at\": \"2025-08-04T00:36:04.546304+00:00\"\n      },\n      {\n        \"id\": \"b5acbb4f-02b8-4763-8cc6-32544357ad4a\",\n        \"conversationId\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"content\": \"DIRECT API TEST: Dashboard to Widget 1754267988380\",\n        \"senderType\": \"agent\",\n        \"senderId\": \"6f9916c7-3575-4a81-b58e-624ab066bebc\",\n        \"senderName\": \"jam@jam.com\",\n        \"senderEmail\": \"jam@jam.com\",\n        \"createdAt\": \"2025-08-04T00:39:49.248062+00:00\",\n        \"updatedAt\": \"2025-08-04T00:39:49.248062+00:00\",\n        \"metadata\": {\n          \"source\": \"dashboard\",\n          \"agent_id\": \"6f9916c7-3575-4a81-b58e-624ab066bebc\",\n          \"timestamp\": \"2025-08-04T00:39:49.101Z\"\n        },\n        \"attachments\": [],\n        \"status\": \"sent\",\n        \"inReplyToId\": null,\n        \"isDeleted\": false,\n        \"conversation_id\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"sender_type\": \"agent\",\n        \"created_at\": \"2025-08-04T00:39:49.248062+00:00\"\n      },\n      {\n        \"id\": \"b78951da-fa0e-4878-a1ea-7816f368b7b0\",\n        \"conversationId\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"content\": \"API TEST: Direct widget API call 1754270874037\",\n        \"senderType\": \"visitor\",\n        \"senderId\": \"\",\n        \"senderName\": \"Test Visitor\",\n        \"senderEmail\": null,\n        \"createdAt\": \"2025-08-04T01:27:54.199638+00:00\",\n        \"updatedAt\": \"2025-08-04T01:27:54.199638+00:00\",\n        \"metadata\": {},\n        \"attachments\": [],\n        \"status\": \"sent\",\n        \"inReplyToId\": null,\n        \"isDeleted\": false,\n        \"conversation_id\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"sender_type\": \"visitor\",\n        \"created_at\": \"2025-08-04T01:27:54.199638+00:00\"\n      },\n      {\n        \"id\": \"8cdcaeda-cc49-41bc-a36f-b75ebd68cb60\",\n        \"conversationId\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"content\": \"API TEST: Direct widget API call 1754270976724\",\n        \"senderType\": \"visitor\",\n        \"senderId\": \"\",\n        \"senderName\": \"Test Visitor\",\n        \"senderEmail\": null,\n        \"createdAt\": \"2025-08-04T01:29:36.932672+00:00\",\n        \"updatedAt\": \"2025-08-04T01:29:36.932672+00:00\",\n        \"metadata\": {},\n        \"attachments\": [],\n        \"status\": \"sent\",\n        \"inReplyToId\": null,\n        \"isDeleted\": false,\n        \"conversation_id\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"sender_type\": \"visitor\",\n        \"created_at\": \"2025-08-04T01:29:36.932672+00:00\"\n      },\n      {\n        \"id\": \"75cbe457-d3dd-4871-841b-ce898ec83825\",\n        \"conversationId\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"content\": \"BIDIRECTIONAL TEST: Widget message 1754271079852\",\n        \"senderType\": \"visitor\",\n        \"senderId\": \"\",\n        \"senderName\": \"Test Visitor\",\n        \"senderEmail\": null,\n        \"createdAt\": \"2025-08-04T01:31:20.01986+00:00\",\n        \"updatedAt\": \"2025-08-04T01:31:20.01986+00:00\",\n        \"metadata\": {},\n        \"attachments\": [],\n        \"status\": \"sent\",\n        \"inReplyToId\": null,\n        \"isDeleted\": false,\n        \"conversation_id\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"sender_type\": \"visitor\",\n        \"created_at\": \"2025-08-04T01:31:20.01986+00:00\"\n      },\n      {\n        \"id\": \"56430338-a00d-4ab2-8e96-fa5c71bd3749\",\n        \"conversationId\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"content\": \"FINAL TEST: Widget message with last_message_at fix\",\n        \"senderType\": \"visitor\",\n        \"senderId\": \"\",\n        \"senderName\": \"Test User\",\n        \"senderEmail\": null,\n        \"createdAt\": \"2025-08-04T01:41:16.043248+00:00\",\n        \"updatedAt\": \"2025-08-04T01:41:16.043248+00:00\",\n        \"metadata\": {},\n        \"attachments\": [],\n        \"status\": \"sent\",\n        \"inReplyToId\": null,\n        \"isDeleted\": false,\n        \"conversation_id\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"sender_type\": \"visitor\",\n        \"created_at\": \"2025-08-04T01:41:16.043248+00:00\"\n      },\n      {\n        \"id\": \"2eee0261-a632-4cf7-a665-526aa7fc92f4\",\n        \"conversationId\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"content\": \"SUPABASE DIRECT TEST: Dashboard message\",\n        \"senderType\": \"agent\",\n        \"senderId\": \"test@agent.com\",\n        \"senderName\": \"Test Agent\",\n        \"senderEmail\": \"test@agent.com\",\n        \"createdAt\": \"2025-08-04T01:44:04.42289+00:00\",\n        \"updatedAt\": \"2025-08-04T01:44:04.42289+00:00\",\n        \"metadata\": {},\n        \"attachments\": [],\n        \"status\": \"sent\",\n        \"inReplyToId\": null,\n        \"isDeleted\": false,\n        \"conversation_id\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"sender_type\": \"agent\",\n        \"created_at\": \"2025-08-04T01:44:04.42289+00:00\"\n      },\n      {\n        \"id\": \"44ad9962-8f1d-4589-bbae-7b9387e23c11\",\n        \"conversationId\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"content\": \"SPAM ELIMINATION TEST: Widget message to trigger cleanup\",\n        \"senderType\": \"visitor\",\n        \"senderId\": \"\",\n        \"senderName\": \"Test User\",\n        \"senderEmail\": null,\n        \"createdAt\": \"2025-08-04T01:55:47.221404+00:00\",\n        \"updatedAt\": \"2025-08-04T01:55:47.221404+00:00\",\n        \"metadata\": {},\n        \"attachments\": [],\n        \"status\": \"sent\",\n        \"inReplyToId\": null,\n        \"isDeleted\": false,\n        \"conversation_id\": \"8ddf595b-b75d-42f2-98e5-9efd3513ea4b\",\n        \"sender_type\": \"visitor\",\n        \"created_at\": \"2025-08-04T01:55:47.221404+00:00\"\n      }\n    ],\n    \"count\": 11\n  }\n}\n"
                    },
                    {
                      "text": "‚úÖ Conversation exists with 11 messages\n"
                    }
                  ],
                  "stderr": [],
                  "retry": 0,
                  "startTime": "2025-08-04T01:56:36.182Z",
                  "annotations": [],
                  "attachments": []
                }
              ],
              "status": "expected"
            }
          ],
          "id": "b0291ae167cdc62ddd41-bfc9864f4e32feee03af",
          "file": "simple-homepage-widget-test.spec.ts",
          "line": 153,
          "column": 5
        }
      ]
    }
  ],
  "errors": [],
  "stats": {
    "startTime": "2025-08-04T01:56:35.915Z",
    "duration": 28949.446,
    "expected": 2,
    "skipped": 0,
    "unexpected": 0,
    "flaky": 0
  }
}