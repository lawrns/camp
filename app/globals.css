/* ===== IMPORT DESIGN SYSTEM ===== */
@import "../styles/design-system.css";

/* ===== IMPORT BRAND TOKENS ===== */
@import "../styles/brand-tokens.css";

/* ===== IMPORT TAILWIND ===== */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== ESSENTIAL BASE STYLES ===== */
/* Only styles not covered by design-system.css */
@layer base {

  /* Global box-sizing and reset */
  * {
    box-sizing: border-box;
  }

  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Enable smooth native scrolling */
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
    height: 100%; /* Ensure html takes full height */
    overscroll-behavior-y: auto; /* Allow natural scroll behavior */
  }

  /* App-specific body styles */
  body {
    margin: 0;
    padding: 0;
    min-height: 100dvh; /* Use dynamic viewport height for mobile */
    display: flex;
    flex-direction: column;
    /* Enable smooth native scrolling */
    -webkit-overflow-scrolling: touch;
    overflow-x: hidden; /* Only prevent horizontal scroll, don't clip */
    overscroll-behavior-y: auto; /* Allow natural scroll behavior */
    touch-action: auto; /* Allow touch scrolling */
  }
}

/* ===== CROSS-BROWSER CENTER ALIGNMENT FIXES ===== */
@layer utilities {
  /* Robust center alignment for text content */
  .text-center-robust {
    text-align: center !important;
    display: block;
    margin-left: auto;
    margin-right: auto;
  }

  /* Center alignment for hero sections */
  .hero-center {
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }

  /* Ensure headings are properly centered across browsers */
  .heading-center {
    text-align: center !important;
    margin-left: auto;
    margin-right: auto;
    display: block;
    width: 100%;
  }

  /* Paragraph center alignment with proper spacing */
  .paragraph-center {
    text-align: center !important;
    margin-left: auto;
    margin-right: auto;
    display: block;
    max-width: 100%;
  }

  /* Container center alignment */
  .container-center {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
  }

  /* Fix for Safari and older browsers */
  @supports not (display: flex) {
    .hero-center,
    .container-center {
      text-align: center;
      margin: 0 auto;
    }
  }

  /* Ensure proper centering in grid layouts */
  .grid-center {
    place-items: center;
    text-align: center;
  }

  /* Button center alignment */
  .button-center {
    display: flex;
    justify-content: center;
    align-items: center;
    margin: 0 auto;
  }

  /* ===== HOMEPAGE SPECIFIC STYLES ===== */
  /* Home page specific styles - scoped to this page only */
  .home-page {
    /* Enable smooth native scrolling */
    -webkit-overflow-scrolling: touch;
    overflow-x: hidden; /* Only prevent horizontal scroll */
    overflow-y: auto; /* Allow vertical scrolling */
    background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 50%, #f3e8ff 100%);
    min-height: 100dvh; /* Ensure full height */
    overscroll-behavior-y: auto; /* Allow natural scroll behavior */
    touch-action: auto; /* Allow touch scrolling */
  }

  /* Fix overflow issues for hero section elements */
  .home-page h1,
  .home-page h2,
  .home-page h3,
  .home-page h4,
  .home-page h5,
  .home-page h6 {
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    max-width: 100%;
  }

  .home-page p {
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    max-width: 100%;
  }

  .home-page div {
    overflow-wrap: break-word;
    word-wrap: break-word;
  }

  /* ===== Z-INDEX MANAGEMENT ===== */
  /* Systematic z-index hierarchy for Hero section */
  .z-0 { z-index: 0; }
  .z-10 { z-index: 10; }
  .z-15 { z-index: 15; }
  .z-20 { z-index: 20; }
  .z-30 { z-index: 30; }
  .z-40 { z-index: 40; }
  .z-50 { z-index: 50; }

  /* Hero section container overflow management */
  .hero-container {
    overflow-x: hidden;
    max-width: 100vw;
    position: relative;
  }

  /* Animation classes for the homepage */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes float {
    0%,
    100% {
      transform: translateY(0px);
    }

    50% {
      transform: translateY(-10px);
    }
  }

  /* Gradient text effects */
  .gradient-text {
    background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Custom scrollbar for the homepage */
  .home-page::-webkit-scrollbar {
    width: 8px;
  }

  .home-page::-webkit-scrollbar-track {
    background: #f1f5f9;
  }

  .home-page::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 4px;
  }

  .home-page::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
  }

  /* ===== HERO SECTION RESPONSIVE FIXES ===== */
  /* Mobile-specific positioning for Hero elements */
  @media (max-width: 768px) {
    .hero-chat-bubble {
      bottom: 1rem !important;
      left: 50% !important;
      transform: translateX(-50%) !important;
      max-width: 85% !important;
    }

    .hero-floating-metrics {
      position: relative !important;
      right: auto !important;
      bottom: auto !important;
      top: auto !important;
      margin: 1rem 0 !important;
    }

    .hero-operator-image {
      max-width: 280px !important;
    }

    /* Allow proper scrolling */
    .grid.grid-cols-1 {
      overflow: visible;
    }

    /* Ensure proper spacing between grid items on mobile */
    .grid.grid-cols-1 > * + * {
      margin-top: 2rem;
    }
  }

  /* Hero section fixes */
  .hero-content *,
  .hero-section * {
    max-width: 100%;
    overflow-wrap: break-word;
  }

  .hero-title {
    line-height: 1.2;
    overflow-wrap: break-word;
  }

  .hero-description {
    line-height: 1.6;
    overflow-wrap: break-word;
  }

  /* Mobile responsive utilities */
  @media (max-width: 390px) {
    .text-2xl {
      font-size: 1.5rem;
    }
    
    .text-xl {
      font-size: 1.125rem;
    }
  }

  .overflow-wrap-anywhere {
    overflow-wrap: anywhere;
  }

  .break-words {
    word-break: break-word;
  }

  /* Responsive grid improvements */
@media (max-width: 768px) {
  .grid-cols-1 > * {
    min-width: 0;
  }
  
  .flex-col > * {
    min-width: 0;
  }
}

/* Hero grid layout fixes */
@media (min-width: 768px) {
  .grid-cols-2 > * {
    min-width: 0;
    max-width: 100%;
  }
  
  .grid-cols-2 > *:first-child {
    padding-right: 2rem;
  }
  
  .grid-cols-2 > *:last-child {
    padding-left: 2rem;
  }
}

/* Prevent overflow in hero section */
.max-w-7xl .grid-cols-2 {
  grid-template-columns: 1fr 1fr;
  gap: 3rem;
}

@media (max-width: 1024px) {
  .max-w-7xl .grid-cols-2 {
    gap: 2rem;
  }
}

@media (max-width: 768px) {
  .max-w-7xl .grid-cols-2 {
    grid-template-columns: 1fr;
  }
}

  /* Mobile button improvements */
  @media (max-width: 640px) {
    .min-w-0 {
      min-width: 0;
    }
    
    .whitespace-normal {
      white-space: normal;
    }
  }

  /* Tablet adjustments */
  @media (min-width: 769px) and (max-width: 1024px) {
    .hero-floating-metrics {
      right: 0.5rem !important;
    }

    /* Reduce gap on tablets to prevent overlap */
    .grid.lg\:grid-cols-2 {
      gap: 2rem;
    }
  }

  /* Large screen optimizations */
  @media (min-width: 1280px) {
    .grid.lg\:grid-cols-2 {
      gap: 5rem;
    }
  }

/* COMPREHENSIVE ICON + TEXT NO-WRAP FIX */
/* Prevent wrapping for icon-text combinations while avoiding overflow */

/* Target specific icon-text containers, not all flex containers */
.flex.items-center:has(svg),
.flex.items-center:has([class*="icon"]),
.inline-flex.items-center:has(svg),
.inline-flex.items-center:has([class*="icon"]) {
  white-space: nowrap;
}

/* Global overflow prevention for all text elements */
h1, h2, h3, h4, h5, h6, p, div, span {
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Specific fixes for chat bubbles and message containers */
[class*="message"], [class*="bubble"], [class*="chat"] {
  word-break: break-word;
  overflow-wrap: break-word;
  hyphens: auto;
  overflow: visible;
}

/* Enhanced chat message overflow prevention */
[class*="bg-gray-100"],
.chat-message,
.message-bubble,
.rounded-2xl {
  word-break: break-word;
  overflow-wrap: anywhere;
  hyphens: auto;
  max-width: 100%;
}

/* Fallback for browsers without :has() support - target common icon-text patterns */
@supports not selector(:has(*)) {
  .flex.items-center > svg + *,
  .flex.items-center > [class*="icon"] + *,
  .inline-flex.items-center > svg + *,
  .inline-flex.items-center > [class*="icon"] + * {
    white-space: nowrap;
  }
}

/* Explicitly allow wrapping for text content areas */
p.flex.items-center,
.text-content .flex.items-center,
.prose .flex.items-center,
.flex.items-center.flex-wrap,
.flex.items-center[class*="wrap"],
.flex.items-center.text-wrap,
.flex.items-center[class*="break"] {
  white-space: normal !important;
}

/* Force all SVGs and icons to never shrink */
svg,
[class*="icon"],
.icon {
  flex-shrink: 0 !important;
}

/* Button-specific fixes */
button,
[role="button"],
.btn,
[class*="btn"] {
  white-space: nowrap !important;
}

/* Fix nested flex containers in buttons that cause text wrapping */
button .flex.items-center,
button .inline-flex.items-center,
[role="button"] .flex.items-center,
[role="button"] .inline-flex.items-center,
.btn .flex.items-center,
.btn .inline-flex.items-center,
[class*="btn"] .flex.items-center,
[class*="btn"] .inline-flex.items-center {
  white-space: nowrap !important;
  flex-wrap: nowrap !important;
}

/* Prevent flex-1 from causing layout conflicts in buttons */
button .flex-1,
[role="button"] .flex-1,
.btn .flex-1,
[class*="btn"] .flex-1 {
  flex: none !important;
  white-space: nowrap !important;
}

/* Fix specific nested span structure in unified buttons */
button span.flex.items-center span.flex-1,
[role="button"] span.flex.items-center span.flex-1,
.btn span.flex.items-center span.flex-1,
[class*="btn"] span.flex.items-center span.flex-1 {
  flex: none !important;
  white-space: nowrap !important;
  overflow: visible !important;
  text-overflow: clip !important;
}

/* Ensure proper flex container behavior for button content */
button span.flex.items-center,
[role="button"] span.flex.items-center,
.btn span.flex.items-center,
[class*="btn"] span.flex.items-center {
  flex-wrap: nowrap !important;
  align-items: center !important;
  gap: 0.5rem !important;
}

/* Ensure button content stays on single line */
button span,
[role="button"] span,
.btn span,
[class*="btn"] span {
  white-space: nowrap !important;
}

/* Navigation elements */
nav .flex.items-center,
nav .inline-flex.items-center,
nav a,
nav button {
  white-space: nowrap;
}

/* Ensure icons with margins/padding don't wrap */
svg[class*="mr-"],
svg[class*="ml-"],
svg[class*="mx-"],
[class*="icon"][class*="mr-"],
[class*="icon"][class*="ml-"],
[class*="icon"][class*="mx-"] {
  flex-shrink: 0 !important;
}

/* Fix common UI components with flex layout issues */
/* Badges, chips, and similar small components */
.badge .flex.items-center,
.chip .flex.items-center,
.tag .flex.items-center,
[class*="badge"] .flex.items-center,
[class*="chip"] .flex.items-center,
[class*="tag"] .flex.items-center {
  white-space: nowrap !important;
  flex-wrap: nowrap !important;
}

/* Menu items and dropdown options */
.menu-item .flex.items-center,
.dropdown-item .flex.items-center,
[role="menuitem"] .flex.items-center,
[role="option"] .flex.items-center {
  white-space: nowrap !important;
  flex-wrap: nowrap !important;
}

/* Toolbar and action bar items */
.toolbar .flex.items-center,
.action-bar .flex.items-center,
[class*="toolbar"] .flex.items-center,
[class*="action"] .flex.items-center {
  white-space: nowrap !important;
  flex-wrap: nowrap !important;
}

/* Tab components */
.tab .flex.items-center,
[role="tab"] .flex.items-center,
[class*="tab"] .flex.items-center {
  white-space: nowrap !important;
  flex-wrap: nowrap !important;
}
}